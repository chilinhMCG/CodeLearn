window.initCommentEditor = (objRef, guid) => {
    let configName = `commentEditorConfig-${guid}`;
    let elemId = `comment-editor-${guid}`;

    window[configName] = {
        //there's a bug when typing 'dưới' in vietnamese, using a different selector seems to fix it
        selector: `textarea#${elemId}`,
        content_css: [
            'https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap',
            '/css/bootstrap/bootstrap.min.css',
            '/_content/MudBlazor/MudBlazor.min.css',
            '/css/tinymce/classic_mode_content.css'
        ],
        menubar: false,
        placeholder: "Viết bình luận...",
        statusbar: false,
        max_height: 500,
        plugins: ['lists', 'link', 'codesample', 'autolink', 'paste', 'table', 'autoresize'],
        paste_as_text: true,
        toolbar: ['h4 h5 | bold italic underline | numlist bullist table | blockquote codesample | link unlink'],
        setup: function (editor) {

            editor.on('LoadContent', function (e) {
                //remove default selector elem generated by Editor component
                document.getElementById(elemId).nextElementSibling.nextElementSibling.remove();

                objRef.invokeMethodAsync('OnEditorLoaded');
            });

            window[`setCommentEditorContentEmpty-${guid}`] = () => editor.setContent("");
        }
    }

    objRef.invokeMethodAsync('OnConfigObjReady', configName);
};


window.disposeCommentEditor = (guid) => {
    delete window[`commentEditorConfig${guid}`];
    delete window[`setCommentEditorContentEmpty-${guid}`];
}