@using System.ComponentModel.DataAnnotations
@inject ISnackbar Snackbar
@inject RoleManager<IdentityRole> Roles;
@inject IRoleRepository RoleRepository;

<MudText>Thêm Role</MudText>
<EditForm Model="@model" OnValidSubmit="OnValidSubmit">
    <DataAnnotationsValidator />

    <MudTextField Label="Tên Role" HelperText="Max. 20 characters"
                  @bind-Value="model.Name" For="@(() => model.Name)" />
    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Create</MudButton>

</EditForm>
@code {
    int Count = 1;
    IdentityRole model = new IdentityRole();
    bool success;

    public class RoleForm
    {
        [Required]
        [StringLength(20, ErrorMessage = "Role Name length can't' be more than 20.")]
        public string Name { get; set; }

    }

    private async Task OnValidSubmit(EditContext context)
    {
        success = true;
        StateHasChanged();
        await RoleRepository.Add(model);
        Snackbar.Add("Thêm role thành công!", Severity.Success);
        await Task.Delay(1500);
    }

}
