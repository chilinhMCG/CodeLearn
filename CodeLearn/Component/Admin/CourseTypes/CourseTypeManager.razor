@page "/admin/course-type-manager"
@inject ICourseTypeRepository CourseTypeRepository
@inject ISnackbar Snackbar
@attribute [Authorize(Roles = "Admin")]

<MudGrid>
    <MudItem lg="6">
        <MudPaper Class="p-3">
            <MudGrid>
                <MudItem lg="12">
                    <MudText Color="Color.Success">Thêm nhóm khóa học</MudText>
                </MudItem>
                <MudItem lg="9">
                    <MudTextField @bind-Value="_courseType.Name" Label="Tên khóa học"
                                  Variant="Variant.Outlined"
                                  Margin="Margin.Dense">
                    </MudTextField>
                </MudItem>
                <MudItem lg="3">
                    <MudIconButton Icon="@Icons.Material.Outlined.AddCircleOutline"
                                   Color="@Color.Success" @onclick="Add" />
                </MudItem>
            </MudGrid>
        </MudPaper>
    </MudItem>
    <MudItem lg="12">
        <MudPaper Class="p-3">
            <MudTable Items="@courseTypes" Hover="true" Bordered="true">
                <HeaderContent>
                    <MudTh Style="text-align:center">Tên nhóm khóa học</MudTh>
                    <MudTh></MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="Name">@context.Name</MudTd>
                    <MudTd DataLabel="Edit" Style="text-align:center">
                        <MudLink Href="@($"course-type/edit/{context.Id.ToString()}")">Edit</MudLink>｜
                        <MudLink Href="@($"course-type/delete/{context.Id.ToString()}")">Delete</MudLink>
                    </MudTd>
                </RowTemplate>
               
            </MudTable>
        </MudPaper>
    </MudItem>
</MudGrid>

@code {
        CourseType _courseType = new();
        List<CourseType> courseTypes = new();

    protected override void OnInitialized()
    {

        courseTypes = CourseTypeRepository.GetAllCourseType();
    }

    protected void Add()
    {
        if (!string.IsNullOrWhiteSpace(_courseType.Name))
        {
            CourseTypeRepository.AddCourseType(_courseType);
            Snackbar.Add("Thêm nhóm bài học thành công !", Severity.Success);
            _courseType = new();
        }

        courseTypes = CourseTypeRepository.GetAllCourseType();


    }

    
}
